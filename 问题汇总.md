# 遇到的问题

1. 乱码问题

```
看到 windows dos 里面默认 gbk 编码

nodejs gb2312、GBK中文乱码解决方法
iconv需要依赖native库，这样一来，在一些不支持native模块安装的虚拟主机和windows平台上，我们还是无法安心处理GBK编码。

老外写了一个通过纯Javascript转换编码的模块 iconv-lite

可以实现window下的转换 ，通过npm可以安装此模块，bufferhelper是一个操作buffer的加强类

首先安装

npm install iconv-lite
npm install bufferhelper

var http = require('http'), 
var url = require('url').parse('http://www.9958.pw/');
var iconv = require('iconv-lite'); 
var BufferHelper = require('bufferhelper');

http.get(url,function(res){
  var bufferHelper = new BufferHelper();
  res.on('data', function (chunk) {
    bufferHelper.concat(chunk);
  });
  res.on('end',function(){ 
    console.log(iconv.decode(bufferHelper.toBuffer(),'GBK'));
  });
})

cnode社区回答:https://cnodejs.org/topic/545de1e1a68535a174fe51b5

request 请求到的数据为乱码:https://cnodejs.org/topic/545de1e1a68535a174fe51b5
楼主之所以看到了乱码，是因为没有 ungzip。request 需要手工指定，superagent 自动 ungzip 

1 request中如果不手动设置gzip的话显示的的确是乱码，加gzip参数后显示的便是unicode，想要看中文的话还是需要用json去parse下的。
2 superagent自带parseJson方法，内部做过处理。
3 我装的chrome是原版无插件的，浏览器看出来的就是unicode代码。诚如楼主所说能看到中文是装过json自动转换工具的。

有请求的:
http.createServer((req, res) => {  试试
  // 发送 HTTP 头部
    // HTTP 状态值: 200 : OK  
    // 内容类型: text/plain  
    res.writeHead(200, {'Content-Type': 'text/html; charset=utf-8'});  
    // 发送响应数据 "Hello World"  
       res.write('<h1>node.js学习 <h1>');  
       res.write('<h3>不知道怎么学习</h3>');  
        res.write('<h3>没有比较好的学习网站 请留个言</h3>');  
    res.end('<h1>this is nodejs as server show content</h1>');  
}).listen(8080);  
```

2.转码
```
iconv-lite 转编码的问题
cnode社区:https://cnodejs.org/topic/55b5e1ce0b2974890124e50f
```
