# 生成目录的 cli 小工具.

## 1.准备工作
- install
```
npm install -S commander shelljs
```

## 2.初始化 配置 `package.json`，新建bin文件夹，新建一个tw.js
```
{
    "name": "mycli",
    "version": "1.0.0",
    "description": "",
    "main": "index.js",
    "preferGlobal": true,
    "bin": "tw.js",
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "",
    "license": "ISC",
    
    ......省略
}
```

## 编辑 tw.js
```
var program = require('commander');

var appInfo = require('../package.json');

program.version(appInfo.version) // 拿到 package.json 你定义的版本
program
    .command('share <shell>') // 定义你的command

    .alias('s') // 缩写

    .description('Enter the "shell" you want to convert and include it in \" \"  ') // 描述

    .option("-p, --path <path>", "Enter you html path , default ./share_you_shell.html") // option 字命令，可以无限多个

    .action(function (cmd, options) {
    // 拿到cli输入的option子命令，没有可以默认
        var path = typeof options.path == 'string' ? options.path : "./share_you_shell.html"
        // 执行你的操作 ↓
        // 执行cli的command
        exec_shell.exec(cmd, (res) => {
            // 回调的res根据格式转为数组
            var res_arr = S(res).lines()
            // 针对数组你的逻辑处理一波数组
            let str = format.toTypedFormat([cmd].concat(res_arr))
            // 异步制作你的文件，传入路径
            file.mkfile(str, path)
        })
    }).on('--help', function () {

         // --help  commander 有默认处理，一般这部分无事可做，你还想干啥？
    });

program.parse(process.argv);
```

## test
```
输入 tw -- help 大概是这样的
Usage: tw [options] [command]

  Options:

    -V, --version              output the version number
    -h, --help                 output usage information

  Commands:

    share|s [options] <shell>  Enter the "shell" you want to convert and include it in " "


```

## 执行
```
tw share "tree -L 2" -p test/test/test.html
如果生成了test.html, 就可以发布 npm 了

```

## 参考
- 如何用node开发自己的cli工具： https://cnodejs.org/topic/5b6b321758db3ccf66a45339
- 一个简单而强大的本地javascript插件一个很酷的打字机的效果：https://github.com/tameemsafi/typewriterjs
